# 分销平台技术方案概述

## 当前现状

- 消费者前台中文站已完成，采用 **Next.js 15 + TypeScript + Tailwind CSS v4 + Zustand + shadcn/ui** 技术栈。
- 日文站、英文站与中文站将共用同一套后端服务（.NET）与数据库。
- 管理后台使用 .NET 作为核心，负责鉴权、订单、客户、佣金等领域逻辑，并统一接入数据库（计划使用 AWS 托管服务）。
- 分销平台计划拆分为独立入口，仅服务销售人员与分销商，提供销售看板、订单、客户/分销商管理等功能。

## 技术选型与架构思路

- **前端技术**：延续消费者站栈（Next.js 15 + TypeScript + Tailwind + Zustand + shadcn/ui），在 monorepo 或共享组件库中复用组件、hooks、样式和国际化资源，避免引入 Ant Design Pro 造成双体系维护。
- **UI 组件与可视化**：
  - 复用现有 shadcn/ui 组件（表单、对话框、Tabs、Dropdown 等）。
  - 针对仪表盘/图表可引入 `recharts` 或 `@tanstack/react-charts` 并封装 `DashboardCard`、`TrendChart` 等组件，统一视觉与交互。
  - 数据表格可基于 `@tanstack/react-table` + Tailwind 实现，复用消费者站已有封装。
- **状态与数据访问**：
  - 客户端状态继续使用 Zustand；数据获取推荐使用 Next.js Server Actions 或 `@tanstack/react-query`/SWR，通过 .NET API 统一访问。
  - 身份鉴权由 .NET 提供的 Token/Cookie 方案处理，前端仅消费标准化接口。
- **后端与基础设施**：
  - .NET Web API 暴露 REST/GraphQL 服务，统一业务规则、权限与多角色数据隔离。
  - 数据库计划迁移至 AWS（Aurora PostgreSQL 或 DynamoDB），由 .NET 层进行访问与缓存策略。
  - 通过 AWS 基础设施（API Gateway/ALB、Lambda 或 ECS、CloudFront、S3）实现全球就近访问与静态资源分发。
- **日志与运维**：CloudWatch + X-Ray 监控后端，前端通过 Vercel/Amplify/GitHub Actions 部署流水线；Secrets 使用 AWS Secrets Manager。
- **项目组织**：采用 monorepo 结构，在 `apps/distributor`（或类似命名）下构建分销平台应用，与 `apps/consumer-zh` 等站点共用 `packages/ui`、`packages/api-client` 等公共模块，实现代码复用与部署隔离。

## 近期开发路线

1. **组件共享与项目结构**：搭建 monorepo 或共享组件包，将消费者站复用组件抽离，准备分销平台工程骨架。
2. **鉴权与路由**：实现销售/分销商登录流程，接入 .NET 鉴权 API，完成基础布局与导航（桌面端）。
3. **数据看板 MVP**：封装仪表盘组件并接通销售/提成/客户统计接口，实现首页核心数据展示。
4. **订单与客户模块**：构建列表、筛选、详情、退款申请等页面，与后端 API 联调，确保权限隔离。
5. **二级分销管理与任务中心**：实现搜索、审批、启用/停用等操作，补全任务列表交互。
6. **国际化与多语言支持**：复用现有 i18n 方案，准备日文、英文翻译资源。
7. **性能与运维**：接入监控、日志、错误上报（Sentry 等），优化全球访问性能并完善 CI/CD。

## 中长期规划

- **统一 Headless Commerce 能力**：评估是否引入 headless commerce（如 Medusa、Commercetools）整合商品、库存与订单，减少重复实现。
- **多端扩展**：预留后续移动端（React Native/Flutter）访问同一 API 的能力。
- **数据治理与分析**：建设数据仓库或 BI 接口，为销售/分销提供更深层 KPI 分析。
- **权限与审计**：完善 RBAC/ABAC，叠加操作审计日志，满足合规要求。

---

如需进一步拆解任务或评估替代方案，可在后续迭代中逐项深化。
